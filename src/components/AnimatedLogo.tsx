'use client';

import { useEffect, useRef } from 'react';

type AnimatedLogoProps = {
  className?: string;
  /** Espessura do contorno. Default: 3 */
  strokeWidth?: number;
};

export default function AnimatedLogo({
  className,
  strokeWidth = 3,
}: AnimatedLogoProps) {
  const svgRef = useRef<SVGSVGElement | null>(null);

  useEffect(() => {
    const svg = svgRef.current;
    if (!svg) return;

    const paths = Array.from(svg.querySelectorAll('path.logo-stroke'));

    // Prepara cada path com o comprimento real para o efeito de desenho
    paths.forEach((path, index) => {
      try {
        const length = path.getTotalLength();
        path.style.setProperty('--path-length', `${length}`);
        path.style.strokeDasharray = `${length}`;
        path.style.strokeDashoffset = `${length}`;
        // Pequeno stagger para ficar mais orgânico (principalmente em logos com múltiplos paths)
        path.style.animationDelay = `${index * 0.15}s`;
      } catch {
        // Se algo der errado (raro), não quebra a renderização
      }
    });
  }, []);

  return (
    <svg
      ref={svgRef}
      className={['animated-logo', className].filter(Boolean).join(' ')}
      viewBox="0 0 512 512"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      role="img"
      aria-label="Logo AdvoSoft"
      style={
        {
          ['--logo-stroke-width' as any]: strokeWidth,
        } as React.CSSProperties
      }
    >
      {/* Gradiente animado para o contorno */}
      <defs>
        <linearGradient id="logo-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stopColor="#3b82f6" className="gradient-stop-1">
            <animate
              attributeName="stop-color"
              values="#3b82f6;#8b5cf6;#ec4899;#f59e0b;#3b82f6"
              dur="10s"
              repeatCount="indefinite"
            />
          </stop>
          <stop offset="50%" stopColor="#8b5cf6" className="gradient-stop-2">
            <animate
              attributeName="stop-color"
              values="#8b5cf6;#ec4899;#f59e0b;#3b82f6;#8b5cf6"
              dur="10s"
              repeatCount="indefinite"
            />
          </stop>
          <stop offset="100%" stopColor="#ec4899" className="gradient-stop-3">
            <animate
              attributeName="stop-color"
              values="#ec4899;#f59e0b;#3b82f6;#8b5cf6;#ec4899"
              dur="10s"
              repeatCount="indefinite"
            />
          </stop>
        </linearGradient>
      </defs>
      
      {/* Camada de preenchimento (logo "por trás") */}
      <g className="logo-fill" opacity="0.15">
        <path
          className="logo-fill-path"
          fill="#0f172a"
          d="M0.370391 142.118C4.27285 158.397 26.6233 169.889 82.8541 185.051C90.1269 186.967 101.834 190.159 108.575 192.074C115.493 193.989 124.539 196.543 128.974 197.66C133.409 198.777 139.795 200.533 143.165 201.65C146.535 202.927 152.566 204.683 156.469 205.8C179.529 212.025 204.895 222.878 218.553 232.294C230.615 240.753 246.225 259.267 255.627 276.664C266.802 297.253 267.689 299.647 265.56 306.191C264.673 309.224 263.786 313.693 263.786 316.087C263.786 318.64 263.077 320.556 262.012 320.556C261.125 320.556 260.239 318.959 260.239 316.885C260.239 313.693 253.321 292.625 249.773 284.645C242.323 268.525 230.261 251.766 218.731 241.551C210.216 234.05 189.462 221.601 185.56 221.601C184.673 221.601 182.544 220.962 180.77 220.164C179.174 219.526 175.449 217.77 172.433 216.493C169.595 215.217 158.775 211.865 148.486 208.992C138.198 206.119 127.023 202.767 123.653 201.65C120.282 200.533 113.896 198.777 109.462 197.66C93.6746 193.67 88.8852 192.393 82.8541 190.478C79.4838 189.361 70.6146 186.807 63.3419 184.892C42.5879 179.465 23.253 173.4 21.4791 171.645C20.7696 171.006 18.2862 170.527 15.8028 170.527C12.6099 170.527 11.723 171.166 12.6099 173.081C13.1421 174.518 13.6742 176.273 13.6742 176.912C13.6742 179.465 24.6721 189.84 30.171 192.393C39.2176 196.543 63.3419 202.448 84.628 205.481C91.9008 206.598 101.125 208.034 105.027 208.832C110.881 210.109 109.994 210.109 100.593 209.471C80.9029 208.034 53.9405 205.64 44.3617 204.683C39.2176 204.044 34.9604 204.204 34.9604 204.842C34.9604 205.321 39.0402 209.311 44.007 213.621C55.5369 223.516 63.6966 225.591 84.2732 224.154C114.606 222.08 133.763 221.601 127.2 223.037C115.67 225.751 90.8364 229.581 84.628 229.581C81.2577 229.581 77.1778 230.379 75.7588 231.177C73.4528 232.614 73.6302 233.252 76.6457 235.327C86.5792 242.349 94.3841 244.584 107.688 244.424C114.961 244.424 124.539 243.467 128.974 242.349C139.44 239.796 159.307 235.965 162.5 235.965C167.467 235.965 162.677 237.88 140.327 244.743C127.732 248.574 117.267 252.404 116.912 253.202C116.735 254.001 118.154 255.118 120.46 255.597C122.766 256.075 128.974 257.671 134.65 258.948C143.52 261.183 145.648 261.342 154.163 259.267C169.063 255.597 174.385 254.001 178.642 251.926C180.77 250.808 182.189 250.649 181.48 251.606C180.948 252.404 175.271 255.437 168.886 258.15C162.5 260.863 157.356 263.896 157.356 264.694C157.356 265.492 165.161 268.205 174.739 270.919C202.766 279.058 214.828 285.602 227.245 299.807C232.567 305.872 243.387 326.461 247.822 338.91C254.207 356.786 255.272 358.861 257.046 357.903C257.933 357.424 259.352 355.349 260.239 353.434C261.658 350.082 261.658 350.082 263.077 353.274C265.915 359.659 272.655 363.489 279.219 362.372C284.363 361.574 286.314 357.903 283.831 354.232C278.509 346.411 272.655 336.037 273.188 335.558C273.542 335.239 278.332 338.91 283.653 343.698C293.764 352.796 301.037 355.03 306.004 350.561C309.374 347.529 308.665 345.773 299.263 336.516C281.702 319.438 276.203 313.533 277.09 312.895C277.445 312.575 280.106 314.171 283.121 316.725C307.6 338.431 314.873 341.783 322.5 335.558C325.516 333.005 324.806 332.207 308.132 320.396C298.554 313.533 289.33 306.191 287.733 303.957C285.072 300.286 285.072 299.807 288.088 296.455C289.862 294.54 292.7 291.827 294.651 290.39C296.425 288.954 298.908 287.039 300.15 285.921C304.939 281.772 318.598 276.186 336.159 271.238C346.093 268.365 354.252 265.332 354.252 264.534C354.252 263.577 349.108 260.704 342.722 258.15C336.336 255.437 330.66 252.404 329.951 251.447C329.241 250.33 329.951 250.17 332.257 251.128C334.03 251.926 342.368 254.639 350.705 257.193C364.718 261.502 366.492 261.662 375.538 259.906C394.696 256.075 398.244 252.404 385.827 249.053C371.813 245.222 348.931 237.082 349.818 236.284C350.705 235.486 363.476 237.721 381.037 241.711C386.359 242.988 397.357 243.945 405.339 243.945C418.465 243.945 420.771 243.467 428.754 238.998C433.543 236.284 437.623 233.571 437.623 232.773C437.623 231.017 432.834 229.581 426.448 229.581C420.771 229.581 395.583 225.591 385.295 223.197C380.15 221.92 380.15 221.92 387.068 221.76C390.971 221.601 404.984 222.399 418.288 223.516C448.443 225.91 454.829 224.633 467.601 213.621C472.568 209.311 476.648 205.481 476.648 204.842C476.648 204.204 473.277 204.044 469.197 204.523C449.685 206.598 403.033 210.269 402.501 209.63C402.146 209.311 405.694 208.673 410.483 208.034C439.219 204.523 469.552 197.82 481.26 192.393C490.129 188.243 502.191 173.879 499.175 171.006C498.466 170.527 494.209 171.166 489.597 172.602C478.421 175.954 451.814 184.094 438.51 188.243C426.98 191.755 408 197.181 399.485 199.256C396.647 200.054 386.182 203.246 376.425 206.279C340.771 217.77 315.582 230.858 305.117 243.467C302.456 246.818 299.618 249.691 298.908 250.01C298.021 250.33 297.489 251.447 297.489 252.404C297.489 253.362 296.425 255.277 295.006 256.554C291.99 259.746 286.314 275.068 283.299 287.677C281.879 294.061 280.638 296.455 279.751 294.859C277.977 292.146 279.573 285.123 287.024 262.3C292.7 245.382 293.232 244.424 303.698 235.167C309.551 229.9 316.824 224.474 319.662 223.197C322.678 221.92 327.112 219.686 329.596 218.249C338.82 212.503 379.973 199.097 438.51 182.498C450.217 179.146 461.038 175.794 462.457 175.156C463.876 174.518 469.552 172.443 474.874 170.687C489.419 165.58 500.949 158.557 505.739 151.534C510.173 145.15 513.366 137.01 511.415 137.01C510.883 137.01 505.029 140.522 498.288 144.671C485.694 152.811 459.973 164.622 442.058 170.527C436.204 172.443 429.995 174.677 428.222 175.475C426.448 176.273 415.627 179.784 404.275 183.296C350.705 199.416 345.56 201.171 324.984 209.95C311.857 215.536 307.245 217.93 303.166 221.282C301.747 222.399 298.554 224.474 296.248 225.91C292.168 228.304 291.813 228.304 289.152 224.793C279.219 212.025 246.58 215.217 237.888 229.9C236.292 232.454 235.227 231.975 227.068 225.91C218.908 220.005 204.008 212.344 193.719 208.832C191.768 208.194 185.028 205.8 178.642 203.566C172.256 201.491 161.081 197.979 153.808 196.064C146.535 194.149 137.666 191.595 134.296 190.478C130.925 189.361 119.75 186.169 109.462 183.296C99.1735 180.582 85.6923 176.433 79.3065 174.198C72.9206 171.964 66.18 169.57 64.2288 168.931C62.2776 168.293 54.4726 165.101 46.8451 161.909C39.395 158.717 32.6544 156.163 32.1222 156.163C30.8805 156.163 8.35269 141.958 5.15977 139.085C1.07993 135.414 -0.8713 136.691 0.370391 142.118ZM277.977 227.187C279.396 228.623 279.396 229.581 278.332 229.581C277.267 229.581 276.026 230.858 275.494 232.454C274.075 236.444 267.689 235.965 262.722 231.496C260.416 229.581 257.755 227.985 256.691 227.985C255.804 227.985 254.917 227.187 254.917 226.389C254.917 223.676 275.494 224.474 277.977 227.187ZM251.369 235.167C251.369 236.604 252.966 238.2 255.094 238.838L258.642 240.115L254.74 244.424C251.192 248.734 250.837 248.734 247.644 246.18C243.742 243.147 243.21 237.561 246.403 234.688C249.241 232.135 251.369 232.294 251.369 235.167ZM271.769 240.753C273.365 243.147 271.236 245.541 268.221 244.584C266.979 244.105 266.27 242.669 266.802 241.392C267.866 238.838 270.172 238.519 271.769 240.753ZM285.072 242.988C285.072 247.776 282.412 249.691 280.815 246.18C279.041 241.871 279.573 239.157 282.412 239.157C284.008 239.157 285.072 240.594 285.072 242.988ZM267.689 250.33C269.64 253.043 270.172 253.202 272.833 250.968C275.494 248.893 275.848 248.893 276.735 252.245C277.267 254.32 276.913 259.108 276.026 263.098C275.139 267.088 273.897 272.674 273.365 275.387C272.655 278.26 271.769 280.654 271.059 280.654C270.527 280.654 266.979 275.228 263.254 268.684C256.868 257.033 256.691 256.395 259.352 251.926C262.545 246.339 264.673 245.861 267.689 250.33Z"
        />
        <path
          className="logo-fill-path"
          fill="#0f172a"
          d="M205.782 304.276C201.17 308.585 194.074 314.012 190.172 316.725C186.269 319.279 182.012 322.311 180.77 323.269C179.529 324.386 177.755 325.344 177.045 325.344C174.739 325.344 167.821 331.887 168.886 333.164C170.305 335.399 180.238 336.516 184.85 334.92C187.156 334.122 195.138 328.695 202.589 322.79C210.039 317.044 216.602 312.735 217.312 313.214C218.198 314.171 205.959 326.461 191.591 338.91C184.673 344.815 184.141 348.646 190.172 351.2C196.558 353.753 203.298 350.561 216.07 339.07C227.068 329.015 227.245 330.451 216.779 345.454C208.265 357.265 207.91 359.499 213.232 361.733C220.327 364.766 222.278 364.128 229.019 356.945C232.567 353.274 235.582 350.561 235.937 351.04C236.292 351.359 238.42 356.945 240.726 363.17C243.742 372.267 245.516 374.821 247.999 374.821C250.837 374.821 251.369 373.544 251.369 366.841C251.369 362.532 250.482 356.945 249.418 354.551C248.354 352.157 246.757 348.646 246.048 346.89C238.42 328.217 219.795 296.615 216.602 296.615C215.36 296.615 210.394 300.126 205.782 304.276Z"
        />
      </g>

      {/* paths originais do public/login/logo.svg, mas aqui desenhamos apenas o contorno */}
      <path 
        className="logo-stroke"
        d="M0.370391 142.118C4.27285 158.397 26.6233 169.889 82.8541 185.051C90.1269 186.967 101.834 190.159 108.575 192.074C115.493 193.989 124.539 196.543 128.974 197.66C133.409 198.777 139.795 200.533 143.165 201.65C146.535 202.927 152.566 204.683 156.469 205.8C179.529 212.025 204.895 222.878 218.553 232.294C230.615 240.753 246.225 259.267 255.627 276.664C266.802 297.253 267.689 299.647 265.56 306.191C264.673 309.224 263.786 313.693 263.786 316.087C263.786 318.64 263.077 320.556 262.012 320.556C261.125 320.556 260.239 318.959 260.239 316.885C260.239 313.693 253.321 292.625 249.773 284.645C242.323 268.525 230.261 251.766 218.731 241.551C210.216 234.05 189.462 221.601 185.56 221.601C184.673 221.601 182.544 220.962 180.77 220.164C179.174 219.526 175.449 217.77 172.433 216.493C169.595 215.217 158.775 211.865 148.486 208.992C138.198 206.119 127.023 202.767 123.653 201.65C120.282 200.533 113.896 198.777 109.462 197.66C93.6746 193.67 88.8852 192.393 82.8541 190.478C79.4838 189.361 70.6146 186.807 63.3419 184.892C42.5879 179.465 23.253 173.4 21.4791 171.645C20.7696 171.006 18.2862 170.527 15.8028 170.527C12.6099 170.527 11.723 171.166 12.6099 173.081C13.1421 174.518 13.6742 176.273 13.6742 176.912C13.6742 179.465 24.6721 189.84 30.171 192.393C39.2176 196.543 63.3419 202.448 84.628 205.481C91.9008 206.598 101.125 208.034 105.027 208.832C110.881 210.109 109.994 210.109 100.593 209.471C80.9029 208.034 53.9405 205.64 44.3617 204.683C39.2176 204.044 34.9604 204.204 34.9604 204.842C34.9604 205.321 39.0402 209.311 44.007 213.621C55.5369 223.516 63.6966 225.591 84.2732 224.154C114.606 222.08 133.763 221.601 127.2 223.037C115.67 225.751 90.8364 229.581 84.628 229.581C81.2577 229.581 77.1778 230.379 75.7588 231.177C73.4528 232.614 73.6302 233.252 76.6457 235.327C86.5792 242.349 94.3841 244.584 107.688 244.424C114.961 244.424 124.539 243.467 128.974 242.349C139.44 239.796 159.307 235.965 162.5 235.965C167.467 235.965 162.677 237.88 140.327 244.743C127.732 248.574 117.267 252.404 116.912 253.202C116.735 254.001 118.154 255.118 120.46 255.597C122.766 256.075 128.974 257.671 134.65 258.948C143.52 261.183 145.648 261.342 154.163 259.267C169.063 255.597 174.385 254.001 178.642 251.926C180.77 250.808 182.189 250.649 181.48 251.606C180.948 252.404 175.271 255.437 168.886 258.15C162.5 260.863 157.356 263.896 157.356 264.694C157.356 265.492 165.161 268.205 174.739 270.919C202.766 279.058 214.828 285.602 227.245 299.807C232.567 305.872 243.387 326.461 247.822 338.91C254.207 356.786 255.272 358.861 257.046 357.903C257.933 357.424 259.352 355.349 260.239 353.434C261.658 350.082 261.658 350.082 263.077 353.274C265.915 359.659 272.655 363.489 279.219 362.372C284.363 361.574 286.314 357.903 283.831 354.232C278.509 346.411 272.655 336.037 273.188 335.558C273.542 335.239 278.332 338.91 283.653 343.698C293.764 352.796 301.037 355.03 306.004 350.561C309.374 347.529 308.665 345.773 299.263 336.516C281.702 319.438 276.203 313.533 277.09 312.895C277.445 312.575 280.106 314.171 283.121 316.725C307.6 338.431 314.873 341.783 322.5 335.558C325.516 333.005 324.806 332.207 308.132 320.396C298.554 313.533 289.33 306.191 287.733 303.957C285.072 300.286 285.072 299.807 288.088 296.455C289.862 294.54 292.7 291.827 294.651 290.39C296.425 288.954 298.908 287.039 300.15 285.921C304.939 281.772 318.598 276.186 336.159 271.238C346.093 268.365 354.252 265.332 354.252 264.534C354.252 263.577 349.108 260.704 342.722 258.15C336.336 255.437 330.66 252.404 329.951 251.447C329.241 250.33 329.951 250.17 332.257 251.128C334.03 251.926 342.368 254.639 350.705 257.193C364.718 261.502 366.492 261.662 375.538 259.906C394.696 256.075 398.244 252.404 385.827 249.053C371.813 245.222 348.931 237.082 349.818 236.284C350.705 235.486 363.476 237.721 381.037 241.711C386.359 242.988 397.357 243.945 405.339 243.945C418.465 243.945 420.771 243.467 428.754 238.998C433.543 236.284 437.623 233.571 437.623 232.773C437.623 231.017 432.834 229.581 426.448 229.581C420.771 229.581 395.583 225.591 385.295 223.197C380.15 221.92 380.15 221.92 387.068 221.76C390.971 221.601 404.984 222.399 418.288 223.516C448.443 225.91 454.829 224.633 467.601 213.621C472.568 209.311 476.648 205.481 476.648 204.842C476.648 204.204 473.277 204.044 469.197 204.523C449.685 206.598 403.033 210.269 402.501 209.63C402.146 209.311 405.694 208.673 410.483 208.034C439.219 204.523 469.552 197.82 481.26 192.393C490.129 188.243 502.191 173.879 499.175 171.006C498.466 170.527 494.209 171.166 489.597 172.602C478.421 175.954 451.814 184.094 438.51 188.243C426.98 191.755 408 197.181 399.485 199.256C396.647 200.054 386.182 203.246 376.425 206.279C340.771 217.77 315.582 230.858 305.117 243.467C302.456 246.818 299.618 249.691 298.908 250.01C298.021 250.33 297.489 251.447 297.489 252.404C297.489 253.362 296.425 255.277 295.006 256.554C291.99 259.746 286.314 275.068 283.299 287.677C281.879 294.061 280.638 296.455 279.751 294.859C277.977 292.146 279.573 285.123 287.024 262.3C292.7 245.382 293.232 244.424 303.698 235.167C309.551 229.9 316.824 224.474 319.662 223.197C322.678 221.92 327.112 219.686 329.596 218.249C338.82 212.503 379.973 199.097 438.51 182.498C450.217 179.146 461.038 175.794 462.457 175.156C463.876 174.518 469.552 172.443 474.874 170.687C489.419 165.58 500.949 158.557 505.739 151.534C510.173 145.15 513.366 137.01 511.415 137.01C510.883 137.01 505.029 140.522 498.288 144.671C485.694 152.811 459.973 164.622 442.058 170.527C436.204 172.443 429.995 174.677 428.222 175.475C426.448 176.273 415.627 179.784 404.275 183.296C350.705 199.416 345.56 201.171 324.984 209.95C311.857 215.536 307.245 217.93 303.166 221.282C301.747 222.399 298.554 224.474 296.248 225.91C292.168 228.304 291.813 228.304 289.152 224.793C279.219 212.025 246.58 215.217 237.888 229.9C236.292 232.454 235.227 231.975 227.068 225.91C218.908 220.005 204.008 212.344 193.719 208.832C191.768 208.194 185.028 205.8 178.642 203.566C172.256 201.491 161.081 197.979 153.808 196.064C146.535 194.149 137.666 191.595 134.296 190.478C130.925 189.361 119.75 186.169 109.462 183.296C99.1735 180.582 85.6923 176.433 79.3065 174.198C72.9206 171.964 66.18 169.57 64.2288 168.931C62.2776 168.293 54.4726 165.101 46.8451 161.909C39.395 158.717 32.6544 156.163 32.1222 156.163C30.8805 156.163 8.35269 141.958 5.15977 139.085C1.07993 135.414 -0.8713 136.691 0.370391 142.118ZM277.977 227.187C279.396 228.623 279.396 229.581 278.332 229.581C277.267 229.581 276.026 230.858 275.494 232.454C274.075 236.444 267.689 235.965 262.722 231.496C260.416 229.581 257.755 227.985 256.691 227.985C255.804 227.985 254.917 227.187 254.917 226.389C254.917 223.676 275.494 224.474 277.977 227.187ZM251.369 235.167C251.369 236.604 252.966 238.2 255.094 238.838L258.642 240.115L254.74 244.424C251.192 248.734 250.837 248.734 247.644 246.18C243.742 243.147 243.21 237.561 246.403 234.688C249.241 232.135 251.369 232.294 251.369 235.167ZM271.769 240.753C273.365 243.147 271.236 245.541 268.221 244.584C266.979 244.105 266.27 242.669 266.802 241.392C267.866 238.838 270.172 238.519 271.769 240.753ZM285.072 242.988C285.072 247.776 282.412 249.691 280.815 246.18C279.041 241.871 279.573 239.157 282.412 239.157C284.008 239.157 285.072 240.594 285.072 242.988ZM267.689 250.33C269.64 253.043 270.172 253.202 272.833 250.968C275.494 248.893 275.848 248.893 276.735 252.245C277.267 254.32 276.913 259.108 276.026 263.098C275.139 267.088 273.897 272.674 273.365 275.387C272.655 278.26 271.769 280.654 271.059 280.654C270.527 280.654 266.979 275.228 263.254 268.684C256.868 257.033 256.691 256.395 259.352 251.926C262.545 246.339 264.673 245.861 267.689 250.33Z" 
        stroke="url(#logo-gradient)"
      />
      <path 
        className="logo-stroke"
        d="M205.782 304.276C201.17 308.585 194.074 314.012 190.172 316.725C186.269 319.279 182.012 322.311 180.77 323.269C179.529 324.386 177.755 325.344 177.045 325.344C174.739 325.344 167.821 331.887 168.886 333.164C170.305 335.399 180.238 336.516 184.85 334.92C187.156 334.122 195.138 328.695 202.589 322.79C210.039 317.044 216.602 312.735 217.312 313.214C218.198 314.171 205.959 326.461 191.591 338.91C184.673 344.815 184.141 348.646 190.172 351.2C196.558 353.753 203.298 350.561 216.07 339.07C227.068 329.015 227.245 330.451 216.779 345.454C208.265 357.265 207.91 359.499 213.232 361.733C220.327 364.766 222.278 364.128 229.019 356.945C232.567 353.274 235.582 350.561 235.937 351.04C236.292 351.359 238.42 356.945 240.726 363.17C243.742 372.267 245.516 374.821 247.999 374.821C250.837 374.821 251.369 373.544 251.369 366.841C251.369 362.532 250.482 356.945 249.418 354.551C248.354 352.157 246.757 348.646 246.048 346.89C238.42 328.217 219.795 296.615 216.602 296.615C215.36 296.615 210.394 300.126 205.782 304.276Z" 
        stroke="url(#logo-gradient)"
      />
    </svg>
  );
}

